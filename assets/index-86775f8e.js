import{u as O,r as u,j as y,R as P,a as r,H as _,b as B,c as h,B as M,d as $,e as U,f as w,g as T,h as E,i as S,k as x,l as z,m as H,n as D,o as F,p as q,q as J,s as V,t as Y,P as W,C as G,v as K,I as Q}from"./vendor-5d1a92ce.js";function We(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();const X="modulepreload",Z=function(e){return"/rmg-templates/"+e},L={},j=function(n,t,o){if(!t||t.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Z(s),s in L)return;L[s]=!0;const i=s.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!o)for(let m=a.length-1;m>=0;m--){const d=a[m];if(d.href===s&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":X,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((m,d)=>{c.addEventListener("load",m),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>n())};function ee(){const{t:e}=O(),n=u.getEnv(),t=u.getAppVersion();return y(P,{children:[r(_,{as:"h4",size:"md",children:e("RMG Templates")}),r(B,{environment:n,version:t})]})}const te=h.lazy(()=>j(()=>import("./templates-view-d836d607.js"),["assets/templates-view-d836d607.js","assets/vendor-5d1a92ce.js","assets/constant-a8a17384.js"])),ne=h.lazy(()=>j(()=>import("./ticket-view-1360c108.js"),["assets/ticket-view-1360c108.js","assets/vendor-5d1a92ce.js","assets/constant-a8a17384.js"]));function ae(){return r(M,{basename:"/rmg-templates/",children:y($,{children:[r(ee,{}),y(U,{children:[r(w,{path:"/new",element:r(T,{suspenseFallback:r(E,{isIndeterminate:!0}),children:r(ne,{})})}),r(w,{path:"/",element:r(T,{suspenseFallback:r(E,{isIndeterminate:!0}),children:r(te,{})})})]})]})})}const oe={companyConfig:x,templateList:z,selectedCompany:""},v=S({name:"app",initialState:oe,reducers:{appendCompanyAndTemplates:(e,n)=>{const{company:t,templates:o}=n.payload;e.companyConfig.push(t),e.templateList[t.id]=o},setSelectedCompany:(e,n)=>{e.selectedCompany=n.payload}}}),{appendCompanyAndTemplates:se,setSelectedCompany:Ke}=v.actions,ie=v.reducer,re=e=>{const n=document.createElement("details");n.setAttribute("repo","rmg-templates"),n.setAttribute("company",e.id),n.setAttribute("line","00config");const t=document.createElement("summary");t.textContent="New company: "+e.name.en,n.append(t);const o=document.createElement("details");return o.setAttribute("type","name"),o.textContent=JSON.stringify(e.name),n.append(o),n},le=(e,n,t,o,a)=>{const s=document.createElement("details");s.setAttribute("repo","rmg-templates"),s.setAttribute("company",e),s.setAttribute("line",n),s.setAttribute("major",t.toString());const i=document.createElement("summary");i.textContent=`${e}/${n}`+(t?"(M)":""),s.append(i);const l=document.createElement("details");l.setAttribute("type","name"),l.textContent=JSON.stringify(o),s.append(l);const p=document.createElement("details");return p.setAttribute("type","param"),p.textContent=JSON.stringify(a),s.append(p),s},Qe={en:"English","zh-Hans":"Simplified Chinese","zh-Hant":"Traditional Chinese",ko:"Korean"},N=()=>({id:crypto.randomUUID(),line:"",newLine:"",majorUpdate:!1,templateName:{en:"","zh-Hans":"","zh-Hant":"",ko:""},param:void 0}),A={company:"",newCompany:"",companyName:{en:"","zh-Hans":"","zh-Hant":"",ko:""},templates:[]},I=S({name:"ticket",initialState:A,reducers:{setCompany:(e,n)=>{e.company=n.payload},setNewCompany:(e,n)=>{e.newCompany=n.payload},setCompanyNameByLang:(e,n)=>{const{lang:t,name:o}=n.payload;e.companyName[t]=o},addTemplate:e=>{e.templates.push(N())},setTemplateLineById:(e,n)=>{var i,l,p,c,m,d,C;const{id:t,line:o,name:a}=n.payload,s={...(i=e.templates.find(f=>f.id===t))!=null?i:N(),line:o};a&&(s.templateName.en=(l=a.en)!=null?l:"",s.templateName["zh-Hans"]=(p=a["zh-Hans"])!=null?p:"",s.templateName["zh-Hant"]=(d=(m=(c=a["zh-Hant"])!=null?c:a["zh-HK"])!=null?m:a["zh-TW"])!=null?d:"",s.templateName.ko=(C=a.ko)!=null?C:""),e.templates=e.templates.map(f=>f.id===t?s:f)},setTemplateNewLineById:(e,n)=>{e.templates=e.templates.map(t=>t.id===n.payload.id?{...t,newLine:n.payload.newLine}:t)},setTemplateMajorFlagById:(e,n)=>{e.templates=e.templates.map(t=>t.id===n.payload.id?{...t,majorUpdate:n.payload.majorUpdate}:t)},setTemplateLineNameById:(e,n)=>{e.templates=e.templates.map(t=>t.id===n.payload.id?{...t,templateName:{...t.templateName,[n.payload.lang]:n.payload.name}}:t)},setTemplateParamById:(e,n)=>{e.templates=e.templates.map(t=>t.id===n.payload.id?{...t,param:n.payload.param}:t)},removeTemplate:(e,n)=>{e.templates=e.templates.filter(t=>t.id!==n.payload)},resetTicket:()=>A}}),Xe={getCompanyEnglishName:(e,n)=>{var t,o,a;return e.company==="new"?e.companyName.en:(a=(o=(t=n.find(s=>s.id===e.company))==null?void 0:t.name)==null?void 0:o.en)!=null?a:""},getCompanyBlock:e=>e.company!=="new"?null:re({id:e.newCompany,name:e.companyName}),getTemplateBlocks:e=>{const n=e.company==="new"?e.newCompany:e.company;return e.templates.map(t=>{const o=t.line==="new"?t.newLine:t.line,a=t.line!=="new"&&t.majorUpdate;return le(n,o,a,t.templateName,t.param)})},getCompanyErrors:e=>{const n=[],{company:t,newCompany:o,companyName:a}=e;return(!t||t==="new"&&!o)&&n.push("COMPANY_CODE_UNDEFINED"),t==="new"&&Object.values(a).some(s=>!s)&&n.push("COMPANY_NAME_INCOMPLETE"),n},getTemplateErrors:e=>{const n={Overall:[]},{templates:t}=e;return t.length===0&&n.Overall.push("TEMPLATE_SECTION_EMPTY"),t.some(o=>!o.line||o.line==="new"&&!o.newLine)&&n.Overall.push("TEMPLATE_CODE_UNDEFINED"),new Set(t.map(o=>o.line==="new"?o.newLine:o.line)).size!==t.length&&n.Overall.push("TEMPLATE_CODE_DUPLICATED"),t.forEach(o=>{const a=[];Object.values(o.templateName).some(s=>!s)&&a.push("TEMPLATE_NAME_INCOMPLETE"),o.param||a.push("TEMPLATE_PARAM_UNDEFINED"),n["Line "+o.line||o.newLine]=a}),n},getMajorUpdateNames:(e,n)=>{const{company:t,templates:o}=e;return t==="new"?[]:o.filter(a=>a.majorUpdate&&a.line!=="new").map(a=>{var i;const s=(i=n[t].find(l=>l.filename===a.line))==null?void 0:i.name;return s?Object.values(s).join("/"):a.line})}},{setCompany:Ze,setNewCompany:et,setCompanyNameByLang:tt,addTemplate:nt,setTemplateLineById:at,setTemplateNewLineById:ot,setTemplateMajorFlagById:st,setTemplateLineNameById:it,setTemplateParamById:rt,removeTemplate:lt,resetTicket:ct}=I.actions,ce=I.reducer,me=H(),g=D({reducer:{app:ie,ticket:ce},middleware:e=>e().prepend(me.middleware)}),mt=()=>F(),pt=q;window.rmgStore=g;const pe={},de="关闭",ue="公司",fe="英文",ye="线路",he="名称",ge="打开",Ce="风格",we="模板",Te="上传者",Ee={"Add a company...":"添加公司...","Add a line...":"添加线路...","Add item":"添加项目","Add or update templates":"添加或更新模本","Briefly describe your changes and provide justification":"简洁地描述您的改动并提供理由","Click copy button and paste into issue body":"点击复制按钮然后粘贴到 Issue 正文",Close:de,Company:ue,English:fe,"Follow the instructions below to open an Issue":"按下方的指引打开 Issue","Justification for major update of":"重大更新的理由：",Line:ye,"Line code":"线路代码","Major update":"重大更新",Name:he,Open:ge,"Please provide suitable source and justification.":"请您提供适当的来源和理由。","Railway company":"铁路公司","Simplified Chinese":"简体中文",Style:Ce,"Submit templates":"提交模板",Templates:we,"Toggling on 'Major update' will update the uploader field of the template and you are required enter extra justification for it.":"打开“重大更新”选项会更新模板的上传者栏位。您需要为此提供额外的理由。","Traditional Chinese":"繁体中文","Upload templates":"上传模板",Uploader:Te,"Your inputs contain the following errors. Please fix it before submitting.":"您的输入存在以下问题，请在提交前修正他們。"},Le="關閉",Ne="公司",Ae="英文",be="路線",Se="名稱",je="開啟",ve="風格",Ie="範本",ke="上載者",Re={"Add a company...":"新增公司...","Add a line...":"新增路線...","Add item":"新增項目","Add or update templates":"新增或更新範本","Briefly describe your changes and provide justification":"簡短地描述你的變更並提供理由","Click copy button and paste into issue body":"點擊複製按鈕並於 Issue 正文內貼上",Close:Le,Company:Ne,English:Ae,"Follow the instructions below to open an Issue":"按下方的指引開啟 Issue","Justification for major update of":"重大更新的理由：",Line:be,"Line code":"路線代碼","Major update":"重大更新",Name:Se,Open:je,"Please provide suitable source and justification.":"請你提供適當的來源及理由。","Railway company":"鐵路公司","Simplified Chinese":"简體中文",Style:ve,"Submit templates":"提交範本",Templates:Ie,"Toggling on 'Major update' will update the uploader field of the template and you are required enter extra justification for it.":"開啟「重大更新」選項會更新範本的上載者欄位。你需要為此提供額外的理由。","Traditional Chinese":"繁體中文","Upload templates":"上載範本",Uploader:ke,"Your inputs contain the following errors. Please fix it before submitting.":"你的輸入存在以下問題，請於提交前修正他們。"},Oe="닫기",Pe="회사",_e="영문",Be="노선",Me="명칭",$e="열기",Ue="스타일",xe="템플릿",ze="업로더",He={"Add a company...":"회사 추가","Add a line...":"노선 추가","Add item":"프로젝트 추가","Add or update templates":"템플릿 추가 또는 업데이트","Briefly describe your changes and provide justification":"변경 사항을 간결하게 설명하고 이유를 제공하세요","Click copy button and paste into issue body":"복사 단추를 누른 다음 Issue 본문에 붙여넣기",Close:Oe,Company:Pe,English:_e,"Follow the instructions below to open an Issue":"아래 안내로 Issue 열기","Justification for major update of":"주요 업데이트 이유:",Line:Be,"Line code":"노선 코드","Major update":"주요 업데이트",Name:Me,Open:$e,"Please provide suitable source and justification.":"당신이 적당한 출처와 이유를 제공해 주십시오.","Railway company":"철도회사","Simplified Chinese":"중국 간자체",Style:Ue,"Submit templates":"템플릿 제출",Templates:xe,"Toggling on 'Major update' will update the uploader field of the template and you are required enter extra justification for it.":"'주요 업데이트' 옵션을 열면 템플릿의 게시자 필드가 업데이트됩니다.이를 위한 추가적인 이유가 필요합니다.","Traditional Chinese":"중국어 번체자","Upload templates":"업로드 템플릿",Uploader:ze,"Your inputs contain the following errors. Please fix it before submitting.":"귀하의 입력에 다음과 같은 문제가 있으니 제출하기 전에 수정해 주십시오."},k=new J.Builder().use(V).withAppName("RMG Templates").withLng(u.getLanguage()).withResource("en",pe).withResource("zh-Hans",Ee).withResource("zh-Hant",Re).withResource("ko",He).build(),De=e=>{k.changeLanguage(e).then()};u.onLanguageChange(De);const R=document.querySelector.bind(document),Fe=async()=>{var e;try{const t=await(await fetch("/rmg-templates/resources/other-company-config.json")).json(),o=document.createElement("p");return o.textContent="Fetched non-core company config",(e=R("#root"))==null||e.append(o),t}catch(n){return console.error("Failed to fetch non-core company config",n),[]}},qe=async e=>{var n;try{const o=await(await fetch("/rmg-templates/resources/templates/"+e+"/00config.json")).json(),a=document.createElement("p");return a.textContent="Fetched templates of "+e,(n=R("#root"))==null||n.append(a),o}catch(t){return console.error("Failed to fetch template list for "+e,t),[]}},Je=async e=>{const n=await Fe();for(const t of n){const o=await qe(t.id);e.dispatch(se({company:t,templates:o}))}};async function Ve(e){await Je(e)}let b;const Ye=()=>{b=Y(document.getElementById("root")),b.render(r(h.StrictMode,{children:r(W,{store:g,children:r(G,{theme:K,children:r(Q,{i18n:k,children:r(ae,{})})})})}))};u.ready().then(()=>Ve(g)).then(()=>{Ye(),u.injectCss()});export{Qe as A,We as __vite_legacy_guard,mt as a,Ze as b,et as c,tt as d,ot as e,st as f,it as g,rt as h,nt as i,at as j,ct as k,lt as r,Ke as s,Xe as t,pt as u};
